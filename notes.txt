2025-12-16
I need to perform both design as well as operational optimisation. Starting from design optimisation, I need to select control variables. Here it is:
1. Field Aperture Area/Solar multiple
2. Row spacing
3. Number of modules per assembly
4. Aperture width
5. Length of Collector assembly
6. Number of SCA per loop


Talking about control variables that we are going to consider for operational optimisation:
1. Mass flow rate
2. Startup Temperature
3. Shutdown Temperature

After all this, how we are going to perform this task

1 Mwe = 1000 kW

Find out about these variables:
1. System power generated
2. PC HTF pump power and why it is always zero?
3. System net electrical power and why it is negative of field htf pump power?
4. How to convert MWe to kWh? -> 1000
5. What is PPA price multiplier? And difference between retail price and market price?

Now I am thinking how can I perform these two optimisation sequentially.

I am creating a router file that routes through both kind of optimisation

2025-12-17
We have built operational and design optimisation logic and also how can we do it sequentially.

2025-12-19
Now I have built design plus operational optimisation,now I need to implement seasonlity.

2025-12-20
Today I have implement saving state of optimiser in order to resume it from there again.

2025-12-21
I came to know that you need to import some heavy ones when you need them, means inside function body or during calling them. Imports are not declarative although they run whenever you run your code so to speed up your code, you need to import heavy libraries inside. Like matlab engine imports.

I need to learn about constraint handling and about maths behind Evolutionary Optimization algorithms.
I also need to start learning about RL optimisation.

Objective function:
obj = PC electrical power output(P_cycle)(in MWe)*1_000(in kWh/MWe) * unit price(in Rs/kWh) 
    - PC HTF Pump Power(cycle_htf_pump_power)(in MWe)*1_000(in kWh/MWe) * unit price(in Rs/kWh) 
    - Field HTF Pump Power(W_dot_field_pump)(in MWe)*1_000(in kWh/MWe) * unit price(in Rs/kWh)

2025-12-22
I was correcting the objective function where I have mistakenly put P_out_net in place of P_cycle, and I am gettig objective function to be in thousands in case of net. It seems opposite, and we need to solve this.

And second thing as we are dealing with two parameters that are integers, means 1,2,4 like this. So we need to refactor code in order to fix this. There are two ways to handle this:
1. Pass integers to Simulation, that is probably the most correct one.
2. Another way is that as simulation is working with floats too, we can take nearest integer after optimisation.

I think we need to answer this question very carefully!

2025-12-30
I need to carefully reimplement deap library and I have to handle integer and float variables carefully.
And I have to build RL optimiser using sb3 and gymanasium, currently I have template for that from gemini.
I also have to look for crashing of program and checkpointing to handle it. And possibly look for how prefect handles caching because i have seen that even when I am running again program with same configs, caching is not dealt correctly.One possible reason is random seeding.

2025-12-31
assign : takes dict and copies the values into the PySAM model
NOTE : can't use assign here, because we are assigning variables of different sub-modules
So we can't further optimise assigning variables in simulation

Now, I am working on caching simulation to save time. I found out that using dict can't help me.So I have canonicalise it and use tuple. Even use or custom hashing function.

Now, I am caching my data to gdrive but only caching is working, I need to make checkpointing work too.

2026-1-2
Now I have implemented mutiprocessing and it is much faster!
So now I have to implement how it will run for each hour and store it.
And how to add seasonlity thing in this.
I have removed caching my checkpoints to gdrive. It's a bit of tedious and not good for all these tasks.

I have implemented for whole year. Now I can see estimate that it will take around 10 days to complete it.
I can divide in two PCs.

References for electricity data : https://iced.niti.gov.in/energy/electricity/distribution/national-level-consumption/load-curve

Now I am just left with implementing it based on seasonlity.

2026-1-6
I have implemented RL optimiser with PPO as algorithm and enabled multiprocessing to speed up the process. And I have successfully done that.

2026-1-7
Now I am thinking to try out different RL alogorithms and see which one suits best to our problem.
Also I am experimenting with prefect and ray integration called "prefect_ray" to further speed up the process of optimisation.
I found ray uses cores to speed up process too, but multiprocessing copies same data again and again for number of workers instantiated, while ray doesn't do this. But currently I am going with multiprocessing, because I think I really don't have that much big data, so I need not to worry about this.

Now I am thinking to use MinIO for local storage cause it is same as S3-Amazon service and I can set it up in Linux one cause it has 1TB storage disk.

Removed the fluff of import in router.py file by initialising imports in __init__.py file. And dunder method "all" defines what all to be imported when using asterisk to import all.

Now, I have to write test for this code, maybe end-to-end test using Pytest.

2026-1-10
I found out that RL is much more sensitive to hyperparamters than other ML frameworks. So I need to experimnet with Optuna and integrate it here.
For seasonlity part, I don't have to do anything really, because it will be analysed from hour's data only.

2026-1-11
I am now working on Optuna hyperparamters tuning.